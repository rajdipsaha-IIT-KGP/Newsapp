import React, { Component } from 'react';
import Newsitem from './Newsitem';
import Spinner from './Spinner';
import PropTypes from 'prop-types'
import News_style from './News_style.css';
import InfiniteScroll from 'react-infinite-scroll-component'
export class News extends Component {
  static deafaultProps={
    country:'us',
    pageSize:'15',
    category:'general'
  }
  static propTypes={
    country:PropTypes.string,
    pageSize:PropTypes.number,
    category:PropTypes.string
  }
  articles=[{"source":{"id":"the-washington-post","name":"The Washington Post"},"author":"Anthony Faiola, Stefano Pitrelli","title":"Pope Francis launches jubilee, bringing pilgrims and grumbling to Rome - The Washington Post","description":"Opening the Holy Doors of St. Peter’s Basilica on Christmas Eve, Pope Francis inaugurates a jubilee year expected to draw 32 million visitors to Rome.","url":"https://www.washingtonpost.com/world/2024/12/24/jubilee-2025-pope-francis-rome-tourism/","urlToImage":"https://www.washingtonpost.com/wp-apps/imrs.php?src=https://arc-anglerfish-washpost-prod-washpost.s3.amazonaws.com/public/PVTOTNMY7KYKEDC63AVJLRBUTQ.JPG&w=1440","publishedAt":"2024-12-25T03:39:27Z","content":"ROME Romans are gesticulating in overdrive and griping in snarled traffic as the Eternal City overhauls piazzas, fountains, bridges and tunnels. Even more are ranting about surging rents and greedy l… [+312 chars]"},{"source":{"id":"cbs-news","name":"CBS News"},"author":"CBS Colorado","title":"Denver Starbucks workers picket for better working conditions Christmas Eve - CBS Colardo","description":"Denver Starbucks workers say it is not a Merry Christmas as they joined a strike affecting stores coast to coast.","url":"https://www.cbsnews.com/colorado/video/denver-starbucks-workers-picket-for-better-working-conditions-christmas-eve/","urlToImage":"https://assets1.cbsnewsstatic.com/hub/i/r/2024/12/25/ac80a0a7-6f12-4570-9825-ba4508db29fe/thumbnail/1200x630/94bad3e2d3218983dcb697b0ee38a819/22ea415daf016982559cadfe4788dda6.jpg?v=fa9977353833f46f40b07abcd9d5240b","publishedAt":"2024-12-25T02:51:00Z","content":"Watch CBS News\r\n©2024 CBS Broadcasting Inc. All Rights Reserved.\r\nGet browser notifications for breaking news, live events, and exclusive reporting.\r\nNot NowTurn On"},{"source":{"id":"usa-today","name":"USA Today"},"author":"Fernando Cervantes Jr.","title":"Mega Millions winning numbers for December 24 drawing: jackpot hits whopping $1 billion - USA TODAY","description":"Did you win the Mega Millions drawing on Christmas Eve? A jackpot of about $1 billion dollars is up for grabs. See the winning numbers here.","url":"https://www.usatoday.com/story/money/lottery/2024/12/24/mega-millions-winning-numbers/77203551007/","urlToImage":"https://www.usatoday.com/gcdn/authoring/authoring-images/2024/12/24/USAT/77203632007-20230804-t-184646-z-879164532-rc-25-h-2-a-92-z-3-k-rtrmadp-3-usalottery.JPG?crop=8191,4609,x0,y427&width=3200&height=1801&format=pjpg&auto=webp","publishedAt":"2024-12-25T02:06:19Z","content":"One lucky American could have a very happy holiday as the Mega Millions jackpot for Tuesday night rose again to $1 billion.\r\nThe takeaway after taxes would be a lump-sum payment of $448.8 million for… [+3202 chars]"},{"source":{"id":null,"name":"New York Post"},"author":"Hannah Sparks","title":"Christmas Day aurora borealis could light up parts of the US - New York Post ","description":"A massive solar flare this week may prompt a Northern Lights display on Dec. 25.","url":"https://nypost.com/2024/12/24/science/christmas-day-aurora-borealis-could-light-up-parts-of-the-us/","urlToImage":"https://nypost.com/wp-content/uploads/sites/2/2024/12/aurora-borealis-comp-1.jpg?quality=75&strip=all&w=1024","publishedAt":"2024-12-25T01:00:00Z","content":"The sun sends us gifts of a dazzling show of light come Christmas night.\r\nSkywatchers are anticipating a possible aurora borealis for parts of the US on Dec. 25 following a solar flare that spewed a … [+1410 chars]"},{"source":{"id":"associated-press","name":"Associated Press"},"author":"Hillel Italie","title":"Richard Perry, record producer behind ‘You’re So Vain’ and other hits, dies at 82 - The Associated Press","description":"Hitmaking record producer Richard Perry has died at 82. With a flair for both standards and contemporary sounds, his many highlights included Carly Simon’s “You’re So Vain,” Rod Stewart’s “Great American Songbook” series and a Ringo Starr album featuring all …","url":"https://apnews.com/article/richard-perry-dies-obituary-833cc183720594a290f2038e67b17d27","urlToImage":"https://dims.apnews.com/dims4/default/a3e3f57/2147483647/strip/true/crop/3000x1688+0+202/resize/1440x810!/quality/90/?url=https%3A%2F%2Fassets.apnews.com%2Ff1%2F6e%2F5253faf7d91ce12b23b342eea6b5%2F8dc0770b55dc4195b4b26d9a2d54a299","publishedAt":"2024-12-25T00:59:00Z","content":"Richard Perry, a hitmaking record producer with a flair for both standards and contemporary sounds whose many successes included Carly Simons Youre So Vain, Rod Stewarts The Great American Songbook s… [+7091 chars]"},{"source":{"id":"abc-news","name":"ABC News"},"author":"ABC News","title":"Bird flu concerns lead LA County officials to warn against feeding pets raw food - ABC News","description":null,"url":"https://abcnews.go.com/US/bird-flu-case-reported-los-angeles-after-state/story?id\\\\u003d117072963","urlToImage":null,"publishedAt":"2024-12-25T00:33:45Z","content":null},{"source":{"id":"politico","name":"Politico"},"author":"Associated Press","title":"NORAD’s Santa tracker was a Cold War morale boost. Now it attracts millions of kids. - POLITICO","description":"“There are screams and giggles and laughter,” said Bob Sommers, a civilian contractor and NORAD volunteer.","url":"https://www.politico.com/news/2024/12/24/norad-santa-tracker-cold-war-morale-boost-now-for-kids-00196027","urlToImage":"https://static.politico.com/49/d6/d35b40e64856b6da29dc49c49295/norad-santa-tracker-98703.jpg","publishedAt":"2024-12-25T00:22:00Z","content":"There are screams and giggles and laughter, said Bob Sommers, 63, a civilian contractor and NORAD volunteer.\r\nSommers often says on the call that everyone must be asleep before Santa arrives, prompti… [+3595 chars]"},{"source":{"id":"the-washington-post","name":"The Washington Post"},"author":"Sabrina Malhi","title":"U.S. whooping cough cases soar to highest level in a decade - The Washington Post","description":"More than 32,000 cases have been reported this year, nearly five times as many as the same period last year.","url":"https://www.washingtonpost.com/health/2024/12/24/whooping-cough-cases-us-record-outbreak/","urlToImage":"https://www.washingtonpost.com/wp-apps/imrs.php?src=https://arc-anglerfish-washpost-prod-washpost.s3.amazonaws.com/public/5IJSOVQEBMI6ZM6EYRRLD3OPZA.jpg&w=1440","publishedAt":"2024-12-25T00:05:22Z","content":"Whooping cough continues to surge in the United States, with reported cases soaring to more than 32,000 this year nearly five times the 6,500 cases recorded during the same period last year marking t… [+181 chars]"},{"source":{"id":null,"name":"CBS Sports"},"author":"","title":"Fantasy Football Playoffs Championship Week Start 'Em & Sit 'Em Running Backs: It's Bucky Irving time - CBS Sports","description":"Running backs you want in your Championship lineups","url":"https://www.cbssports.com/fantasy/football/news/fantasy-football-playoffs-championship-week-start-em-sit-em-running-backs-its-bucky-irving-time/","urlToImage":"https://sportshub.cbsistatic.com/i/r/2024/12/15/0cf07133-3731-4112-b3e6-5cb4d34a2868/thumbnail/1200x675/cde8e40606aad24b6b8edf59a2b319b1/usatsi-bucky-irving-buccaneers.jpg","publishedAt":"2024-12-24T23:53:17Z","content":"J.K. Dobbins (knee) was limited in practice Tuesday, and he could return in Week 17 at New England after missing the past four games. If he's back then Dobbins would be worth using as a No. 2 running… [+1363 chars]"},{"source":{"id":null,"name":"Hollywood Reporter"},"author":"Kevin Dolak","title":"Justin Baldoni Hit With Breach of Contract Suit From Ex-Publicist After Blake Lively Accusations - Hollywood Reporter","description":"The actor and filmmaker is being sued by his co-star over alleged sexual misconduct on the set of ‘It Ends With Us.’","url":"http://www.hollywoodreporter.com/movies/movie-news/justin-baldoni-lawsuit-steph-jones-blake-lively-publicist-1236093763/","urlToImage":"https://www.hollywoodreporter.com/wp-content/uploads/2024/12/GettyImages-2165117782-H-2024.jpg?w=1296&h=730&crop=1","publishedAt":"2024-12-24T23:49:52Z","content":"Hollywood publicist Steph Jones has accused her former client, filmmaker and actor Justin Baldoni, of breach of contract in a lawsuit filed against him in New York this week, just days after hisIt En… [+2342 chars]"},{"source":{"id":"abc-news","name":"ABC News"},"author":"DARLENE SUPERVILLE Associated Press","title":"Biden signs a bill officially making the bald eagle the national bird of the US - ABC News","description":"President Joe Biden has made it official: The bald eagle is now the national bird of the United States","url":"https://abcnews.go.com/US/wireStory/biden-signs-bill-officially-making-bald-eagle-national-117097174","urlToImage":"https://s.abcnews.com/images/US/abc_news_default_2000x2000_update_16x9_992.jpg","publishedAt":"2024-12-24T23:38:55Z","content":"WASHINGTON -- The bald eagle, a symbol of the power and strength of the United States for more than 240 years, earned an overdue honor on Tuesday: It officially became the country's national bird. \r\n… [+939 chars]"},{"source":{"id":"axios","name":"Axios"},"author":"Rebecca Falconer","title":"Denmark bolstering defense in Greenland after Trump's calls for the U.S. to own the territory - Axios","description":"Defense minister said Denmark would make a \"double-digit billion\" boost in the territory's Arctic.","url":"https://www.axios.com/2024/12/24/denmark-greenland-defense-spending-trump-us-control-comments","urlToImage":"https://images.axios.com/vrSqzPgalX-ehB1YHg7z9pjniTo=/0x334:4802x3036/1366x768/2024/12/24/1735078079828.jpg","publishedAt":"2024-12-24T23:15:34Z","content":"Denmark is increasing defense spending in Greenland, said a Danish official Tuesday who called the announcement's timing with President-elect Trump's suggestion that the U.S. should own the territory… [+2389 chars]"},{"source":{"id":null,"name":"BBC News"},"author":null,"title":"Three shot dead as gunmen attack Haiti's biggest hospital - BBC.com","description":"Many others are injured when armed men fire at medical staff, police and reporters in Port-au-Prince.","url":"https://www.bbc.com/news/articles/cx2vpdnd2jmo","urlToImage":"https://ichef.bbci.co.uk/news/1024/branded_news/dc51/live/96a45d10-c249-11ef-a2ca-e99d0c9a24e3.jpg","publishedAt":"2024-12-24T23:12:45Z","content":"At least three people have been killed when armed men in Haiti opened fire at medical staff, police and journalists during a briefing to announce the reopening of the country's biggest public hospita… [+1388 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"David Axe","title":"Russia’s Arctic Sea Trade ‘Evidently Disrupted’ As Unique Sealift Ship Sinks - Forbes","description":"‘Ursa Major’ was the biggest and most capable vessel in the Kremlin’s logistics fleet.","url":"https://www.forbes.com/sites/davidaxe/2024/12/24/russian-shipbuilding-evidently-disrupted-as-unique-sealift-ship-sinks/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/676b3d182d6cd2b55744fa75/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds","publishedAt":"2024-12-24T23:04:04Z","content":"'Ursa Major.'\r\nPortuguese air force photo\r\nA unique and difficult-to-replace sealift ship operated by the Kremlins military logistics company sank in the Mediterranean Sea near Spain on Christmas Eve… [+2229 chars]"},{"source":{"id":"associated-press","name":"Associated Press"},"author":"JOE REEDY","title":"NFL on Netflix: Christmas Day games are a 1st for streaming giant - The Associated Press","description":"Netflix will have one of its biggest days since the site launched in 1998 when it carries two NFL games for the first time on Christmas. “NFL Christmas Gameday on Netflix” kicks off with a two-hour pregame show at 11 a.m., before Pittsburgh hosts Kansas City.…","url":"https://apnews.com/article/netflix-christmas-nfl-beyonce-9b65162dbe7e3fe1a2dd13d2da89e966","urlToImage":"https://dims.apnews.com/dims4/default/4ec2792/2147483647/strip/true/crop/5760x3240+0+300/resize/1440x810!/quality/90/?url=https%3A%2F%2Fassets.apnews.com%2F14%2Fbd%2Fb1ef7df3af63d271b23074a623e2%2Fdd3ea0e4a33d46fc9f7233e8e50c9ae0","publishedAt":"2024-12-24T22:51:00Z","content":"Netflix will have one of its biggest days Wednesday since the site launched in 1998 when it airs two NFL games for the first time.\r\nNFL Christmas Gameday on Netflix begins with a two-hour pregame sho… [+4299 chars]"},{"source":{"id":"associated-press","name":"Associated Press"},"author":"ADRIANA GOMEZ LICON","title":"Trump vows to pursue executions after Biden commutes most of federal death row - The Associated Press","description":"President-elect Donald Trump says he'll “vigorously pursue” capital punishment after President Joe Biden commuted the sentences of most people on federal death row partly to stop Trump from pushing forward their executions. Trump criticized Biden’s decision o…","url":"https://apnews.com/article/trump-death-row-commutations-biden-d9d1fbb5d6cb0e7727ce9f4644414a62","urlToImage":"https://dims.apnews.com/dims4/default/a367d99/2147483647/strip/true/crop/6435x3620+0+336/resize/1440x810!/quality/90/?url=https%3A%2F%2Fassets.apnews.com%2Fb5%2F74%2F59a8d3c3c07a3eaa9cf83cac21a6%2F42cdddaa9efa4cfaa5ed1b62b10b0a5e","publishedAt":"2024-12-24T22:34:00Z","content":"FORT LAUDERDALE, Fla. (AP) President-elect Donald Trump promised on Tuesday to vigorously pursue capital punishment after President Joe Biden commuted the sentences of most people on federal death ro… [+5083 chars]"},{"source":{"id":null,"name":"Yahoo Entertainment"},"author":"Susanne Rust","title":"What to know about infectious diseases during this holiday season - Yahoo! Voices","description":"As friends and family visit, so too do their viruses. What's trending and where? And how can you protect yourself? The Times speaks with Peter Chin-Hong, a...","url":"https://www.yahoo.com/news/know-infectious-diseases-during-holiday-212831063.html","urlToImage":"https://media.zenfs.com/en/la_times_articles_853/42b2de7913383fea1f360969806167db","publishedAt":"2024-12-24T21:28:31Z","content":"Yahoo is using AI to generate takeaways from this article. This means the info may not always match what's in the article. Reporting mistakes helps us improve the experience.Generate Key Takeaways\r\nI… [+5214 chars]"},{"source":{"id":null,"name":"Minnesota Public Radio News"},"author":"Jacob Aloi","title":"How does it feel? Bob Dylan’s hometown prepares for new film about the singer - MPR News","description":"Ahead of the wide release of “A Complete Unknown” on Christmas day, Dylan’s hometown of Hibbing held an advanced screening.","url":"https://www.mprnews.org/story/2024/12/24/hibbing-minnesota-bob-dylan-hometown-new-film-a-complete-unknown","urlToImage":"https://img.apmcdn.org/70847c8497f91f749182af0c120b844c13726794/widescreen/31b425-20241224-a-man-takes-a-selfie-with-a-raffle-price-2000.jpg","publishedAt":"2024-12-24T21:15:00Z","content":"Bob Dylans music has played a major role in Justine Jacobsons life.  \r\nMy tagline was that he wrote [Girl from the North Country] about me. He just doesnt know it yet.\r\nThe love of his music was shar… [+5032 chars]"},{"source":{"id":"usa-today","name":"USA Today"},"author":"Zach Kruse","title":"Packers PFF grades: Best, worst players from win over Saints in Week 16 - Packers Wire","description":"Based on grades from PFF, here are the best and worst players from the Packers’ Week 16 over the Saints.","url":"https://packerswire.usatoday.com/2024/12/24/packers-pff-grades-best-worst-players-from-win-over-saints-in-week-16/","urlToImage":"https://packerswire.usatoday.com/wp-content/uploads/sites/57/2024/12/USATSI_25057017.jpg?w=1024&h=576&crop=1","publishedAt":"2024-12-24T20:35:00Z","content":"The Green Bay Packers earned their best overall grade of the 2024 season at Pro Football Focus during Monday night’s 34-0 win over the New Orleans Saints at Lambeau Field.\r\nMatt LaFleur’s team was po… [+3735 chars]"},{"source":{"id":"cnn","name":"CNN"},"author":"Alli Rosenbloom","title":"Christopher Nolan’s next film will be a star-studded adaptation of Homer’s ‘The Odyssey’ - CNN","description":"Oscar-winning director Christopher Nolan will be taking audiences to mythical Greece with his latest project.","url":"https://www.cnn.com/2024/12/24/entertainment/christopher-nolan-the-odyssey/index.html","urlToImage":"https://media.cnn.com/api/v1/images/stellar/prod/2024-03-10t000000z-1932757668-hp1ek3a1ugh2d-rtrmadp-3-awards-oscars.JPG?c=16x9&q=w_800,c_fill","publishedAt":"2024-12-24T19:39:00Z","content":"Oscar-winning director Christopher Nolan will be taking audiences to mythical Greece with his latest project.\r\nUniversal Pictures announced this week that Nolan will be directing a cinematic adaptati… [+1598 chars]"}]
  constructor(props)
  {
    super(props);
    this.state={
      articles:this.articles,
      loading:false,
      page:1,
      totalResults:0
    }
    document.title=`${this.props.category}-Newsapp`
  }
 async updateNews(){
  this.props.setProgress(10);
  const url=`https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=99889a6fa94940c4b6aac945f8ff5f2f&page=${this.props.page}&pageSize=${this.props.pageSize}`
  this.setState({loading:true})
  let data= await fetch(url);
  this.props.setProgress(30);
  let parsedata=await data.json();
  this.props.setProgress(70);
  this.setState({articles:parsedata.articles,
    loading:false
  })
  this.props.setProgress(100);
  }
  async componentDidMount(){
    this.updateNews();
   }
  
  fetchMoreData=async()=>{
this.setState({
  page:this.state.page+1
})
const url=`https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=99889a6fa94940c4b6aac945f8ff5f2f&page=${this.props.page}&pageSize=${this.props.pageSize}`
  this.setState({loading:true})
  let data= await fetch(url);
  let parsedata=await data.json();
  this.setState({articles:this.state.articles.concat(parsedata.articles),
    loading:false
  })

  }

  render() {
    return (
      <div>
        <h2 style={{color:"red"}}
        >Newsapp Top Headlines</h2>
          <InfiniteScroll
    dataLength={this.state.articles.length}
    next={this.fetchMoreData}
   
  
    hasMore={this.state.articles.length!==this.state.totalResults}
    loader={<Spinner/>}
    scrollableTarget="scrollableDiv"
  >
{/* {this.state.loading&&<Spinner/> }       */}
        <div className="row my-5 mx-7">
        {this.state.articles.map((element)=>{
         return <div className="col-md-3" key={element.url}>
          <Newsitem title={element.title} description={element.description} imageurl={element.urlToImage} newsURL={element.url} date={element.publishedAt} source={element.source.name}/>
        </div>

        })}
          
        </div>
        </InfiniteScroll>
   

      </div>
    );
  }
}

export default News;
